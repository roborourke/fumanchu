(function(b){b.fumanchu=function(a,c,e,j){var g=this;b.fumanchu.context=c||{};b.fumanchu.fallback=e||c;b.fumanchu.args=j||{};if("undefined"===b.type(a))return"";"function"===b.type(a)&&(a=a.apply(g,[b.fumanchu.context,b.fumanchu.fallback,b.fumanchu.args]));if("object"===b.type(a))if(a.template)b.fumanchu.context=a,a=a.template;else try{a=a.html()}catch(k){}return a.toString().replace(/(__|{{)([a-z0-9\.]+)(}}|__)/gi,function(a,c,e){var d=b.fumanchu.getpath(e,b.fumanchu.context,b.fumanchu.fallback),
f="",h=b.fumanchu.templates[e]||b('[data-template="'+e+'"]').html();!b.fumanchu.templates[e]&&h&&(b.fumanchu.templates[e]=h);"object"===b.type(d)&&d.template?f=g.fumanchu(d.template,d,b.fumanchu.fallback,j):"array"===b.type(d)||"object"===b.type(d)?b.each(d,function(a,c){"object"===b.type(c)&&(!c.template&&h&&(c.template=h),b.fumanchu.context=c);f+=g.fumanchu(c,b.fumanchu.context,b.fumanchu.fallback,{list:d,index:a})}):"function"===b.type(d)?f=d.apply(g,[b.fumanchu.context,b.fumanchu.fallback,j]):
"number"===b.type(d)?f=b.fumanchu.numberformat(d,b.fumanchu.fallback):"boolean"===b.type(d)?f=d?"1":"0":"string"===b.type(d)&&(f=d);"__"===c&&(f=escape(f));return g.fumanchu(f,b.fumanchu.context,b.fumanchu.fallback,b.fumanchu.args)})};b.fumanchu.getpath=function(a,c,e){a=a.split(".");return 4==a.length&&c&&c[a[0]]&&c[a[0]][a[1]]&&c[a[0]][a[1]][a[2]]&&"undefined"!==b.type(c[a[0]][a[1]][a[2]][a[3]])?c[a[0]][a[1]][a[2]][a[3]]:3==a.length&&c&&c[a[0]]&&c[a[0]][a[1]]&&"undefined"!==b.type(c[a[0]][a[1]][a[2]])?
c[a[0]][a[1]][a[2]]:2==a.length&&c&&c[a[0]]&&"undefined"!==b.type(c[a[0]][a[1]])?c[a[0]][a[1]]:1==a.length&&c&&"undefined"!==b.type(c[a[0]])?c[a[0]]:e&&c!==e?b.fn.fumanchu.getpath(a.join("."),e):""};b.fumanchu.templates={};b.fumanchu.numberformat=function(a){return""+a};b(document).ready(function(){b("[data-template]").each(function(){b.fumanchu.templates[b(this).data("template")]=b(this).html()})});b.fn.fumanchu=b.fumanchu})(jQuery);
//# sourceMappingURL=fumanchu.min.js.map
