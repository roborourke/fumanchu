(function(b){b.fumanchu=function(a,c,e,h){var g=this;b.fumanchu.context=c||{};b.fumanchu.fallback=e||c;b.fumanchu.args=h||{};if("undefined"===b.type(a))return"";"function"===b.type(a)&&(a=a.apply(g,[b.fumanchu.context,b.fumanchu.fallback,b.fumanchu.args]));if("object"===b.type(a))if(a.template)b.fumanchu.context=a,a=a.template;else try{a=a.html()}catch(j){}return a.toString().replace(/(?:__|{{)([a-z0-9\.]+)(?:}}|__)/gi,function(a,c){var d=b.fumanchu.getpath(c,b.fumanchu.context,b.fumanchu.fallback),
f="",e=b.fumanchu.templates[c]||b('[data-template="'+c+'"]').html();!b.fumanchu.templates[c]&&e&&(b.fumanchu.templates[c]=e);"array"===b.type(d)?b.each(d,function(a,c){"object"===b.type(c)&&(!c.template&&e&&(c.template=e),b.fumanchu.context=c);f+=g.fumanchu(c,b.fumanchu.context,b.fumanchu.fallback,{list:d,index:a})}):"object"===b.type(d)&&d.template?f=g.fumanchu(d.template,d,b.fumanchu.fallback,h):"function"===b.type(d)?f=d.apply(g,[b.fumanchu.context,b.fumanchu.fallback,h]):"number"===b.type(d)?
f=b.fumanchu.numberformat(d,b.fumanchu.fallback):"boolean"===b.type(d)?f=d?"1":"0":"string"===b.type(d)&&(f=d);return g.fumanchu(f,b.fumanchu.context,b.fumanchu.fallback,b.fumanchu.args)})};b.fumanchu.getpath=function(a,c,e){a=a.split(".");return 4==a.length&&c&&c[a[0]]&&c[a[0]][a[1]]&&c[a[0]][a[1]][a[2]]&&"undefined"!==b.type(c[a[0]][a[1]][a[2]][a[3]])?c[a[0]][a[1]][a[2]][a[3]]:3==a.length&&c&&c[a[0]]&&c[a[0]][a[1]]&&"undefined"!==b.type(c[a[0]][a[1]][a[2]])?c[a[0]][a[1]][a[2]]:2==a.length&&c&&c[a[0]]&&
"undefined"!==b.type(c[a[0]][a[1]])?c[a[0]][a[1]]:1==a.length&&c&&"undefined"!==b.type(c[a[0]])?c[a[0]]:e&&c!==e?b.fn.fumanchu.getpath(a.join("."),e):""};b.fumanchu.templates={};b.fumanchu.numberformat=function(a){return""+a};b(document).ready(function(){b("[data-template]").each(function(){b.fumanchu.templates[b(this).data("template")]=b(this).html()})});b.fn.fumanchu=b.fumanchu})(jQuery);
//# sourceMappingURL=fumanchu.min.js.map
